\documentclass[a4paper, twoside]{article}
\usepackage[margin=2.5cm]{geometry}
\usepackage[T1]{fontenc}
\usepackage{chngcntr}
\usepackage{color}
\usepackage{dejavu}
\usepackage{enumerate}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{paralist}
\usepackage{parskip}
\usepackage{tabularx}

\renewcommand{\baselinestretch}{1.1}

% Configure the fancy headers
\pagestyle{fancy}
\fancyhead[RO,LE]{Maxwell Language Design}
\fancyhead[RE,LO]{}

\def\lstlistingautorefname{Listing}

\lstdefinelanguage{Maxwell}{
	sensitive = true,
	breakatwhitespace = true,
	breaklines = true,
	morekeywords = {any,def,func,type,value,object,interface,native,if,for,else,in,var,otherwise,defer,return,yield},
	emph = {Int,Real,Complex,String,Array,Map,Set,nil,true,false},
	morecomment = [l]{//},
	morecomment = [s]{/*}{*/},
	morestring  = [b]",
}

\lstdefinelanguage{EBNF}{
	sensitive = false,
	breakatwhitespace = true,
	breaklines        = true,
	morecomment  = [s]{'}{\ ,*,?,+,)},
	morestring   = [b]",
	% literate     = {:}{\keywordstyle :}1,
	% moredelim=[is][keywordstyle]{|}{|}
}

\lstset{
	language = Maxwell,
	% whitespace
	showspaces       = false,
	showstringspaces = false,
	showtabs         = false,
	% layout
	frame        = none,
	captionpos   = t,
	tabsize      = 2,
	xleftmargin  = \parindent,
	xrightmargin = \parindent,
	numbers      = left,
	% styles
	basicstyle   = \small\ttfamily,
	numberstyle  = \footnotesize,
	commentstyle = \color[gray]{0.66},
	emphstyle    = \itshape\color[rgb]{0.0, 0.33, 0.66},
	keywordstyle = \bfseries\color[rgb]{0.0, 0.33, 0.66},
	stringstyle  = \color[rgb]{0.0, 0.66, 0.33},
	rulecolor    = \color[gray]{0.66},
}


\begin{document}
	\title{Maxwell Language Design}
	\author{F. Schuiki (fschuiki@student.ethz.ch)}
	\maketitle

	\counterwithin*{lstlisting}{section}
	\renewcommand{\thelstlisting}{\thesection.\arabic{lstlisting}}

	\tableofcontents
	\clearpage

	\input{bodyexprs}
	\input{functions}
	\input{syntax}
	% \input{misc}

	% \clearpage
	% \lstlistoflistings
\end{document}
