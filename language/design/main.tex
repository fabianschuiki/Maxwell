\documentclass[twoside]{report}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
% \usepackage{chngcntr}
\usepackage{color}
\usepackage{dejavu}
\usepackage{enumerate}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{paralist}
\usepackage[parfill]{parskip}
% \usepackage{tabularx}
\usepackage{titlesec}

% Setup the page geometry to be A4 with 2.5cm of margin.
\usepackage{geometry}
\geometry{a4paper, margin=2.5cm}

% Setup how breaks occur.
\raggedbottom

% \setlength{\emergencystretch}{3em}
% \setlength{\parindent}{0cm}
% \setlength{\parskip}{1em plus 0.2em minus 0.1em}

% \renewcommand{\baselinestretch}{1.1}
% \setlength{\parskip}{1em plus 1em minus 0.1em}
% \setlength{\parindent}{0em}

% \titlespacing{\section}{0em}{10em}{2em}
% \titlespacing{\subsection}{0em}{2em plus 2em minus 0.1em}{1em plus 0.5em minus 0.1em}
% \titlespacing{\subsection}{0em}{2em plus 2em minus 0.1em}{1em plus 0.5em}
% \titlespacing{\subsection}{0em}{2em plus 0.2em minus 0.1em}{0em}

% Setup the fance headers.
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[RO,LE]{Maxwell Language Design}
\fancyhead[RE,LO]{}

\def\lstlistingautorefname{Listing}

\lstdefinelanguage{Maxwell}{
	sensitive = true,
	breakatwhitespace = true,
	breaklines = true,
	morekeywords = {any,def,func,type,value,object,interface,native,if,for,else,in,var,otherwise,defer,return,yield},
	emph = {Int,Real,Complex,String,Array,Map,Set,nil,true,false},
	morecomment = [l]{//},
	morecomment = [s]{/*}{*/},
	morestring  = [b]",
}

\lstdefinelanguage{EBNF}{
	sensitive = false,
	breakatwhitespace = true,
	breaklines        = true,
	morecomment  = [s]{'}{\ ,*,?,+,)},
	morestring   = [b]",
	morestring   = [b]/,
	% literate     = {:}{\keywordstyle :}1,
	% moredelim=[is][keywordstyle]{|}{|}
}

\lstset{
	language = Maxwell,
	% whitespace
	showspaces       = false,
	showstringspaces = false,
	showtabs         = false,
	% layout
	frame        = none,
	captionpos   = t,
	tabsize      = 2,
	xleftmargin  = \parindent,
	xrightmargin = \parindent,
	numbers      = left,
	% styles
	basicstyle   = \small\ttfamily,
	numberstyle  = \footnotesize,
	commentstyle = \color[gray]{0.66},
	emphstyle    = \itshape\color[rgb]{0.0, 0.33, 0.66},
	keywordstyle = \bfseries\color[rgb]{0.0, 0.33, 0.66},
	stringstyle  = \color[rgb]{0.0, 0.66, 0.33},
	% colors
	% backgroundcolor = \color[gray]{0.96},
	rulecolor       = \color[gray]{0.66},
}


\begin{document}
	\title{Maxwell Language Design}
	\author{F. Schuiki (fschuiki@student.ethz.ch)}
	\maketitle

	% \counterwithin*{lstlisting}{section}
	% \renewcommand{\thelstlisting}{\thesection.\arabic{lstlisting}}

	\tableofcontents
	\clearpage

	\input{bodyexprs}
	\input{functions}
	\input{syntax}
	% \input{misc}

	% \clearpage
	% \lstlistoflistings
\end{document}
