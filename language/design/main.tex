\documentclass[a4paper, twoside]{article}
\usepackage[margin=2.5cm]{geometry}
\usepackage[T1]{fontenc}
\usepackage{chngcntr}
\usepackage{color}
\usepackage{dejavu}
\usepackage{enumerate}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{paralist}
\usepackage{parskip}

%\setlength{\parindent}{2em}
%\setlength{\parskip}{1em}
\renewcommand{\baselinestretch}{1.1}
% \setlength{\baselineskip}{1em}

% Configure the fancy headers
\pagestyle{fancy}
\setlength{\headheight}{15pt}
\fancyhead[RO,LE]{Maxwell Language Design}
\fancyhead[RE,LO]{}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\def\lstlistingautorefname{Listing}

\lstdefinelanguage{Maxwell}{
	breakatwhitespace=true,
	breaklines=true,
	morekeywords={nil,any,def,func,type,value,object,interface,native,true,false,if,for,else,in,var,otherwise,defer,return},
	emph={Int,Real,Complex,String,Array,Map,Set},
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/}
}

\lstdefinelanguage{EBNF}{
	sensitive=false,
	breaklines=true,
	morecomment=[s]{'}{\ ,*,?,)},
	morestring=[b]",
	% moredelim=[is][keywordstyle]{|}{|}
}

\lstset{
	frame=none,
	language=Maxwell,
	basicstyle=\small\ttfamily,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	captionpos=t,
	tabsize=2,
	emphstyle=\color[rgb]{0.33, 0.66, 1.0},
	commentstyle=\color[gray]{0.66},
	keywordstyle=\bfseries\color[rgb]{0.0, 0.33, 0.66},
	stringstyle=\color[rgb]{1.0, 0.5, 0.0},
	numberstyle=\color[rgb]{1.0, 0.5, 0.0},
	rulecolor=\color[gray]{0.66},
	xleftmargin=\parindent,
	xrightmargin=\parindent
}

\lstnewenvironment{grammar}{\lstset{
	language=EBNF
}}{}

\begin{document}
	\title{Maxwell Language Design}
	\author{F. Schuiki (fschuiki@student.ethz.ch)}
	\maketitle

	\counterwithin*{lstlisting}{section}
	\renewcommand{\thelstlisting}{\thesection.\arabic{lstlisting}}

	\tableofcontents
	\clearpage

	\input{bodyexprs}
	\input{functions}
	\input{syntax}
	% \input{misc}

	% \clearpage
	% \lstlistoflistings
\end{document}
